<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Variants of Inductive Proof - Tools for Thinking About Programs: Mathematical Foundations</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href=".././book.css">
        <link rel="stylesheet" href=".././mdbook-admonish.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Tools for Thinking About Programs: Mathematical Foundations</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="variations-of-inductive-proof"><a class="header" href="#variations-of-inductive-proof">Variations of Inductive Proof</a></h1>
<p>We have learned that operations and proofs over inductively-defined objects follow from their inductive definitions.
For example, recall the inductive definition of a list:</p>
<div id="admonition-definition-list" class="admonition admonish-info" role="note" aria-labelledby="admonition-definition-list-title">
<div class="admonition-title">
<div id="admonition-definition-list-title">
<p>Definition (List)</p>
</div>
<a class="admonition-anchor-link" href="#admonition-definition-list"></a>
</div>
<div>
<p>A <em>list</em> is either:</p>
<ul>
<li>Empty, or</li>
<li>Non-empty, a combination of a <em>head</em> element and the rest of the list, its <em>tail</em>.</li>
</ul>
</div>
</div>
<p>But this isn't the only way of sorting the infinite possible lists into a finite set of cases.
For example, here is an alternative definition:</p>
<div id="admonition-definition-list-alternative" class="admonition admonish-info" role="note" aria-labelledby="admonition-definition-list-alternative-title">
<div class="admonition-title">
<div id="admonition-definition-list-alternative-title">
<p>Definition (List, Alternative)</p>
</div>
<a class="admonition-anchor-link" href="#admonition-definition-list-alternative"></a>
</div>
<div>
<p>A <em>list</em> is either:</p>
<ul>
<li>Empty, or</li>
<li>A <em>singleton</em> list containing exactly one element, or</li>
<li>Non-empty with at least <em>two elements</em> and a <em>tail</em>.</li>
</ul>
</div>
</div>
<p>This definition differs from the previous one because it explicitly calls out the singleton list case.
Both definitions are equivalent---every possible list is described by exactly one of the cases in each definition.
But in some situations, using an alternative inductive definition is appropriate to better fit the operation we are describing or reasoning about.</p>
<p>We'll look at an inductive proof that takes advantage of this alternative definition.
This is just one example of the <em>variations</em> we might encounter when performing inductive proof.
There are many others out there, more than we can cover in the brief time we have in this course.
However, be aware that these variations exist, but they all ultimately rest on our basic definition of inductive reasoning:</p>
<div id="admonition-definition-induction" class="admonition admonish-info" role="note" aria-labelledby="admonition-definition-induction-title">
<div class="admonition-title">
<div id="admonition-definition-induction-title">
<p>Definition (Induction)</p>
</div>
<a class="admonition-anchor-link" href="#admonition-definition-induction"></a>
</div>
<div>
<p>A <em>proof by induction</em> is a proof that proceeds by case analysis on the inductive structure of an object where you may assume an <em>inductive hypothesis</em> in the inductive cases of the proof.</p>
</div>
</div>
<h2 id="case-study-intersperse"><a class="header" href="#case-study-intersperse">Case Study: Intersperse</a></h2>
<p>Previously, we introduced the <code>intersperse</code> function takes an element <code>x</code> and a list <code>l</code> and returns a new list that puts <code>x</code> between each element of <code>l</code>.</p>
<pre><code class="language-python">def intersperse(v, l):
    match l:
        case []:
            return []
        case [x]:
            return [x]
        case [h, *tail]:
            return [h, v, *intersperse(v, tail)]
</code></pre>
<div id="admonition-exercise-why-three" class="admonition admonish-question" role="note" aria-labelledby="admonition-exercise-why-three-title">
<div class="admonition-title">
<div id="admonition-exercise-why-three-title">
<p>Exercise (Why Three?)</p>
</div>
<a class="admonition-anchor-link" href="#admonition-exercise-why-three"></a>
</div>
<div>
<p>It is not immediately obvious why <code>intersperse</code> requires that we have a separate case for the singleton list.
Try implementing <code>intersperse</code> naively with our standard, two-case definition of lists, <em>i.e.</em>, the list is empty or non-empty.
Test your implementation and discover what bug arises with only two cases!
Try to then summarize in a few sentence why this bug occurs and how the singleton case in the above implementation fixes the problem.</p>
</div>
</div>
<p>Suppose we want to prove the following claim:</p>
<div id="admonition-claim-length-of-intersperse" class="admonition admonish-question" role="note" aria-labelledby="admonition-claim-length-of-intersperse-title">
<div class="admonition-title">
<div id="admonition-claim-length-of-intersperse-title">
<p>Claim (Length of Intersperse)</p>
</div>
<a class="admonition-anchor-link" href="#admonition-claim-length-of-intersperse"></a>
</div>
<div>
<p>For all values <code>v</code> and lists <code>l</code>. If <code>not is_empty(l)</code> then <code>length(intersperse(v, l))</code> = <code>2 * length(l) - 1</code>.</p>
</div>
</div>
<p>Note that <code>intersperse</code> is defined according to our alternative, singleton-based definition of a list.
Our proof, therefore, follows the cases outlined by this definition.
If the cases include recursive sub-structure, <em>i.e.</em>, tails of lists drawn from the subject of the inductive proof, then we gain the induction hypotheses for all of these sub-structures.
These are our <em>inductive cases</em> whereas cases with no recursive sub-structures are called <em>base cases</em>.</p>
<p>Here is a formal proof the claim as an exemplar of the concepts we've learned so faralong with some of these additional concerns we've introduced such as using an alternative definition of lists.
Study this proof carefully, paying attention to its structure and formatting.</p>
<div id="admonition-proof" class="admonition admonish-success" role="note" aria-labelledby="admonition-proof-title">
<div class="admonition-title">
<div id="admonition-proof-title">
<p>Proof</p>
</div>
<a class="admonition-anchor-link" href="#admonition-proof"></a>
</div>
<div>
<p><em>Proof</em>.
Let <code>v</code> be an arbitrary value and <code>l</code> be an arbitrary list.
We assume that <code>not is_empty(l)</code> <em>i.e.</em>, <code>l</code> is non-empty.
We proceed by induction on the structure of <code>l</code>.</p>
<ul>
<li>
<p><strong><code>l</code> is empty</strong>.
By assumption, we know that <code>l</code> is not empty.
Thus, we do not need to consider this case.</p>
</li>
<li>
<p><strong><code>l</code> has one element.</strong>
Call the singleton element of this list <code>x</code>.
The left-hand side of the equality evaluates as follows:</p>
<pre><code class="language-python">length(intersperse(v, [x])) --&gt;* length([x]) --&gt;* 1
</code></pre>
<p>And the right-side evaluates to:</p>
<pre><code class="language-python">2 * length([x]) - 1 --&gt;* 2 * 1 - 1 --&gt;* 1
</code></pre>
</li>
<li>
<p><strong><code>l</code> has more than one element.</strong>
Let the first element be <code>h</code> and the remainder of the list be <code>tail</code>.
We assume our inductive hypothesis holds:</p>
<p><strong>IH</strong>: If <code>not is_empty(tail)</code> then <code>length(intersperse(v, tail))</code> = <code>2 * length(tail) - 1</code>.</p>
<p>We must prove:</p>
<p><strong>Goal</strong>: <code>length(intersperse(v, l))</code> = <code>2 * length(l) - 1</code>.</p>
<p>The left-hand side of the equality evaluates to:</p>
<pre><code class="language-python">     length(interserse(v, l))
--&gt;* length([h, v, *intersperse(v, tail)])
--&gt;* 2 + length(intersperse(v, tail))
</code></pre>
<p>In this case, we know that <code>l</code> has at least two elements, so <code>not is_empty(tail)</code>.
Therefore, our induction hypothesis applies and so we can rewrite this final quantity to <code>2 + 2 * length(tail) - 1</code>.</p>
<p>Recalling that in this case, <code>l</code> has at least two elements, the right-hand side of the equality evaluates to:</p>
<pre><code class="language-python">    2 * length(l) - 1
--&gt; 2 * (1 + length(tail)) - 1
  ≡ 2 + 2 * length(tail) - 1
</code></pre>
<p>So both sides of the equality evaluate to <code>2 + 2 * length(tail) - 1</code>, completing the proof.</p>
</li>
</ul>
</div>
</div>
<p>Note that our claim is the form of a conditional: "if … then … ."
This means that our induction hypothesis must also be of this form!
This form of proposition is called a <em>logical implication</em>.
When <em>trying to prove</em> an implication, we assume the "if" portion (the premise) and go on the prove the "then" portion (the conclusion).
However, if we <em>assume that an implication is true</em>, we must first prove the "if" portion and then we can go on to assume the "then" portion.
We will learn more about logical implication and, more generally, mathematical logic soon!</p>
<div id="admonition-exercise-proof-busters-intersperse-edition-" class="admonition admonish-note" role="note" aria-labelledby="admonition-exercise-proof-busters-intersperse-edition--title">
<div class="admonition-title">
<div id="admonition-exercise-proof-busters-intersperse-edition--title">
<p>Exercise (Proof Busters, Intersperse Edition, ‡)</p>
</div>
<a class="admonition-anchor-link" href="#admonition-exercise-proof-busters-intersperse-edition-"></a>
</div>
<div>
<p>Consider the following implementation of intersperse where we do not introduce a special case for a 1-element list:</p>
<pre><code class="language-python">def intersperse(v, l):
    match l:
        case []:
            return []
        case [head, *tail]:
            return [head, v, *intersperse(v, tail)]
</code></pre>
<p>This implementation is not correct.
(If you don't see why, I encourage you to experiment with the function in the Python interpreter!)</p>
<p>Nevertheless, try applying the proof from the reading to these function.
How does the proof change?
The claim should not hold for this function---where does the proof go wrong in your analysis?</p>
</div>
</div>
<footer>Tools for Thinking About Programs: Mathematical Foundations © 2025 by <a href='https://iampmo.com'>Peter-Michael Osera</a> is licensed under <a href='https://creativecommons.org/licenses/by-nc/4.0/'>CC BY-NC 4.0</a>.</footer>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../program-correctness/mathematical-induction.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../program-correctness/propositional-logic.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../program-correctness/mathematical-induction.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../program-correctness/propositional-logic.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
